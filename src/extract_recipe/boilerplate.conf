# Pattern configuration for extract-recipe.
#
# Sections, separated by a [section] header:
#
#   [strip]  — regexes applied to prompt text with re.sub(pattern, "", text).
#              Include leading \n* to consume blank lines left behind.
#
#   [skip]   — regexes matched against the raw .display field.
#              If a prompt matches, it is omitted entirely from the recipe.
#
#   [plan]   — regexes matched against the raw .display field.
#              If a prompt matches, it is collapsed to a title summary.
#
#   [redact] — pattern = replacement pairs for sensitive content.
#              Applied with re.sub(pattern, replacement, text) when -r is used.
#
# Processing order:  [skip] → [strip] → [plan] → [redact]
#   1. Entries matching [skip] are removed entirely
#   2. [strip] patterns are applied to the remaining entries' text
#   3. [plan] patterns are checked to collapse plan prompts to a title
#   4. [redact] patterns replace sensitive content (only with -r flag)
#
# Blank lines and lines starting with # are ignored.
# To add support for another tool (Codex, Antigravity, etc.), append
# patterns below and send a PR.
#
# To customise, run:
#   extract-recipe --init-config
# This copies this file to ~/.config/extract-recipe/patterns.conf
# which you can then edit.  The user config replaces (not extends)
# the package defaults.  Use --config FILE to load from another path.

# =====================================================================
# Claude Code (developed against 2.1.45)
# =====================================================================

[strip]

# Plan-mode transcript reference appended to .display in history.jsonl.
# Matches any line containing a .claude/projects/.../*.jsonl path.
\n*[^\n]*\.claude/projects/[^\n]*\.jsonl

[skip]

# Housekeeping slash commands — no recipe value.
^/config\s*$
^/login\s*$
^/status\s*$
^/statusline\b
^/release-notes\s*$
^/rate-limit-options\s*$
^/upgrade\s*$
^/rewind\s*$

[plan]

# Plan-mode prompts: collapsed to a title summary by default.
^Implement the following plan:

[redact]

# Home directory paths — replace with ~
/(Users|home)/\w+ = ~

# Temporary directory paths — strip username component
/tmp/\w+ = /tmp

# AWS access keys
AKIA[0-9A-Z]{16} = [REDACTED]

# GitHub tokens (PAT, app, OAuth, fine-grained)
ghp_[A-Za-z0-9]{36,} = [REDACTED]
ghs_[A-Za-z0-9]{36,} = [REDACTED]
gho_[A-Za-z0-9]{36,} = [REDACTED]
github_pat_[A-Za-z0-9_]{59,} = [REDACTED]

# OpenAI keys (project and standard)
sk-proj-[A-Za-z0-9_-]{20,} = [REDACTED]
sk-[A-Za-z0-9]{20,} = [REDACTED]
